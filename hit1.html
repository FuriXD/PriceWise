<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PriceWise - Smart Shopping</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* General Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background: #f5f7fa; /* Default background for main app */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #f8f8f8; /* Off-white, more professional */
            transition: background 0.5s ease;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 450px;
            text-align: center;
            animation: fadeInScale 0.6s ease-out;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .logo {
            font-size: 38px;
            font-weight: bold;
            color: #ff6b35;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .tagline {
            color: #666;
            margin-bottom: 35px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s, box-shadow 0.3s;
            background-color: #fcfcfc;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ff6b35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
            margin-bottom: 15px;
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .social-login-options {
            margin-top: 25px;
            border-top: 1px solid #eee;
            padding-top: 25px;
        }

        .social-login-options p {
            color: #777;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .social-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .social-btn {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .social-btn:hover {
            border-color: #ff6b35;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .social-btn i {
            font-size: 20px;
        }

        .social-btn.google { color: #DB4437; } /* Google Red */
        .social-btn.facebook { color: #4267B2; } /* Facebook Blue */

        /* Main App Styles */
        .main-app {
            display: none;
            background: #f5f7fa;
            min-height: 100vh;
        }

        .main-app.show {
            display: block;
        }

        .header {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            padding: 15px 0;
            box-shadow: 0 3px 15px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .header .logo {
            font-size: 28px; /* Adjusted for header */
            margin-bottom: 0;
            color: white;
        }

        .search-bar {
            flex-grow: 1;
            margin: 0 20px;
            max-width: 400px;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 16px;
            transition: background 0.3s;
        }

        .search-bar input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .search-bar input:focus {
            outline: none;
            background: rgba(255,255,255,0.3);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 25px;
            margin-right: 20px; /* Space from cart icon */
        }

        .nav-menu li {
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 5px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 500;
        }

        .nav-menu li:hover, .nav-menu li.active {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }

        .cart-icon {
            position: relative;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: transform 0.2s;
        }

        .cart-icon:hover {
            transform: scale(1.1);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff1744;
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            font-size: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Home Page */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://placehold.co/1200x400/667eea/764ba2?text=PriceWise+Background') no-repeat center center/cover; /* Placeholder background image */
            filter: blur(5px);
            transform: scale(1.05);
            z-index: 0;
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 56px;
            margin-bottom: 25px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
            animation: slideInFromLeft 0.8s ease-out;
        }

        .hero-subtitle {
            font-size: 22px;
            margin-bottom: 40px;
            opacity: 0.9;
            animation: slideInFromRight 0.8s ease-out;
        }

        @keyframes slideInFromLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInFromRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }


        .categories-section, .products-section, .profile-section, .subscription-section, .category-products-section {
            padding: 60px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 36px;
            margin-bottom: 50px;
            color: #333;
            position: relative;
        }

        .section-title::after {
            content: '';
            width: 80px;
            height: 4px;
            background: #ff6b35;
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .category-card {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 35px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
        }

        .category-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 40px rgba(0,0,0,0.2);
        }

        .category-icon {
            font-size: 50px;
            margin-bottom: 20px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 70px;
            color: white;
        }

        .product-info {
            padding: 25px;
        }

        .product-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #333;
        }

        .product-price {
            font-size: 28px;
            color: #ff6b35;
            font-weight: bold;
            margin-bottom: 18px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
            margin-top: 10px; /* Space between price alert and add to cart */
        }

        .add-to-cart-btn:hover {
            transform: translateY(-2px);
            background: linear-gradient(45deg, #45a049, #388e3c);
        }

        .price-alert-btn, .share-btn {
            width: 100%;
            padding: 10px;
            background: #2196f3; /* Blue for price alert */
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
            box-shadow: 0 4px 10px rgba(33, 150, 243, 0.3);
            margin-bottom: 5px; /* Space between buttons */
        }
        .share-btn {
            background: #9c27b0; /* Purple for share */
            box-shadow: 0 4px 10px rgba(156, 39, 176, 0.3);
        }
        .price-alert-btn:hover {
            transform: translateY(-2px);
            background: #1976d2;
        }
        .share-btn:hover {
            transform: translateY(-2px);
            background: #7b1fa2;
        }
        .price-alert-btn.disabled {
            background: #90caf9;
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none;
        }

        /* Cart Animation */
        @keyframes itemAdded {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            50% { transform: translateY(-20px) scale(1.1); opacity: 0.7; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }

        .product-card.adding-to-cart .add-to-cart-btn {
            animation: itemAdded 0.6s ease-out;
        }

        /* Message Box for Add to Cart */
        .message-box {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50; /* Green for success */
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateY(-50px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .message-box.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Cart Page */
        .cart-page {
            padding: 40px 0;
            background: #f8f9fa;
            min-height: 80vh;
        }

        .cart-item {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .cart-item-image {
            width: 90px;
            height: 90px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 35px;
            flex-shrink: 0;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .cart-item-price {
            color: #ff6b35;
            font-size: 18px;
            font-weight: bold;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .quantity-btn {
            width: 35px;
            height: 35px;
            border: none;
            background: #ff6b35;
            color: white;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s, transform 0.2s;
        }

        .quantity-btn:hover {
            background: #e65c2a;
            transform: scale(1.1);
        }

        .quantity-input {
            width: 60px;
            text-align: center;
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 8px;
            font-size: 16px;
            -moz-appearance: textfield; /* Firefox */
        }

        /* Hide number input arrows */
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .remove-btn {
            background: #ff1744;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: background 0.3s, transform 0.2s;
        }

        .remove-btn:hover {
            background: #d32f2f;
            transform: translateY(-2px);
        }

        .price-comparison {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 5px solid #2196f3;
        }

        .price-comparison h4 {
            color: #1976d2;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .competitor-prices {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .competitor-price {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .competitor-price:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .competitor-price.cheapest {
            background: #c8e6c9;
            border-color: #4caf50;
            font-weight: bold;
        }

        .cart-summary {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            margin-top: 30px;
        }

        .checkout-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 25px;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .checkout-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        }

        /* Checkout Page */
        .checkout-page {
            padding: 40px 0;
            background: #f8f9fa;
        }

        .checkout-form {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        .payment-methods {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .payment-method {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s, background 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .payment-method i {
            font-size: 30px;
            margin-bottom: 8px;
            color: #666;
        }

        .payment-method.selected {
            border-color: #ff6b35;
            background: rgba(255, 107, 53, 0.1);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
        }

        .hidden {
            display: none;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .seller-selection {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .seller-selection h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 20px;
        }

        .sellers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .seller-option {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            background-color: #fcfcfc;
        }

        .seller-option:hover {
            border-color: #ff6b35;
            background: rgba(255, 107, 53, 0.05);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .seller-option.selected {
            border-color: #ff6b35;
            background: rgba(255, 107, 53, 0.1);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }

        .seller-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .seller-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .seller-price {
            color: #ff6b35;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .delivery-info {
            font-size: 13px;
            color: #666;
        }
        .delivery-info.delivery-free {
            color: #4caf50;
            font-weight: bold;
        }

        .savings-highlight {
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            padding: 18px;
            border-radius: 10px;
            text-align: center;
            margin: 25px 0;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        /* Razorpay-like success modal */
        .order-success-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .order-success-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 90%;
            animation: modalPopIn 0.4s ease-out;
        }

        @keyframes modalPopIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .success-icon {
            font-size: 80px;
            color: #4CAF50;
            margin-bottom: 25px;
            animation: bounceIn 0.8s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        .modal-title {
            font-size: 32px;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .modal-message {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .modal-details {
            background-color: #f0f4f8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: left;
            font-size: 15px;
            color: #555;
        }

        .modal-details div {
            margin-bottom: 8px;
        }

        .modal-details span:first-child {
            font-weight: 600;
            color: #333;
            display: inline-block;
            width: 120px;
        }

        .modal-close-btn {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .modal-close-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        /* Profile Page Styles */
        .profile-page-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            margin-top: 30px;
        }

        .profile-summary {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .profile-summary h3 {
            font-size: 28px;
            color: #333;
            margin-bottom: 10px;
        }

        .profile-summary p {
            font-size: 20px;
            color: #666;
            font-weight: bold;
        }

        .order-history h3 {
            font-size: 24px;
            color: #333;
            margin-bottom: 25px;
            border-bottom: 2px solid #ff6b35;
            padding-bottom: 10px;
            display: inline-block;
        }

        .order-item-card {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #eee;
        }

        .order-header span {
            font-weight: bold;
            color: #555;
        }

        .order-details-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .order-details-list li {
            margin-bottom: 8px;
            color: #444;
            font-size: 15px;
        }

        .order-details-list li strong {
            color: #333;
            width: 100px;
            display: inline-block;
        }

        .no-orders-message {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 18px;
        }

        /* Subscription Page Styles */
        .subscription-section {
            padding: 60px 0;
            background: #f8f9fa;
            text-align: center;
        }

        .subscription-plans {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .plan-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 350px;
            text-align: left;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .plan-card.pro {
            border: 3px solid #ff6b35;
            background: linear-gradient(135deg, #fff0e0, #ffffff);
            transform: scale(1.03);
        }

        .plan-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .plan-title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .plan-price {
            font-size: 48px;
            font-weight: bold;
            color: #ff6b35;
            margin-bottom: 20px;
        }

        .plan-price span {
            font-size: 18px;
            color: #666;
            font-weight: normal;
        }

        .plan-features {
            list-style: none;
            padding: 0;
            margin-bottom: 30px;
        }

        .plan-features li {
            margin-bottom: 10px;
            font-size: 16px;
            color: #555;
        }

        .plan-features li i {
            color: #4CAF50;
            margin-right: 10px;
        }
        .plan-features li.dimmed {
            opacity: 0.6;
        }
        .plan-features li.dimmed i {
             color: #ccc;
        }


        .activate-pro-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .activate-pro-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .pro-status-message {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
        }

        /* Category Products Page Styling */
        .category-products-page .header-section {
            padding: 20px 0;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-bottom: 30px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .category-products-page .header-section h2 {
            font-size: 40px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .category-products-page .back-button {
            background: #f7931e;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background 0.3s, transform 0.2s;
        }

        .category-products-page .back-button:hover {
            background: #ff6b35;
            transform: translateY(-2px);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            .search-bar {
                order: 3; /* Move search bar to bottom */
                margin: 10px 0;
                width: 100%;
                max-width: none;
            }
            .nav-menu {
                margin-right: 0;
                justify-content: center;
                gap: 15px;
                flex-wrap: wrap;
            }
            .nav-menu li {
                padding: 6px 10px;
                font-size: 14px;
            }
            .hero-title {
                font-size: 40px;
            }
            .hero-subtitle {
                font-size: 18px;
            }
            .section-title {
                font-size: 28px;
            }
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .cart-item-image {
                margin-bottom: 15px;
            }
            .social-buttons {
                flex-direction: column;
                align-items: center;
            }
            .social-btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
        }

    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="logo">PriceWise</div>
            <div class="tagline">Smart Shopping, Better Savings</div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="button" class="login-btn" onclick="handleLogin(event)">Sign In to PriceWise</button>
            </form>
            <div class="social-login-options">
                <p>Or sign up with</p>
                <div class="social-buttons">
                    <button class="social-btn google"><i class="fab fa-google"></i> Sign Up with Google</button>
                    <button class="social-btn facebook"><i class="fab fa-facebook-f"></i> Sign Up with Facebook</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">PriceWise</div>
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search for products..." onkeyup="searchProducts()">
                    </div>
                    <nav>
                        <ul class="nav-menu">
                            <li class="nav-item active" data-page="home">Home</li>
                            <li class="nav-item" data-page="cart">Cart</li>
                            <li class="nav-item" data-page="checkout">Checkout</li>
                            <li class="nav-item" data-page="profile">Profile</li>
                            <li class="nav-item" data-page="subscription">Subscription</li>
                        </ul>
                    </nav>
                    <div class="cart-icon" onclick="showPage('cart')">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Home Page -->
        <div id="homePage" class="page active">
            <section class="hero-section">
                <div class="container hero-content">
                    <h1 class="hero-title">Welcome to PriceWise</h1>
                    <p class="hero-subtitle">Find the best deals across all platforms!</p>
                </div>
            </section>

            <section class="categories-section">
                <div class="container">
                    <h2 class="section-title">Shop by Category</h2>
                    <div class="categories-grid">
                        <div class="category-card" onclick="openCategoryPage('Electronics')">
                            <div class="category-icon">📱</div>
                            <h3>Electronics</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Fashion')">
                            <div class="category-icon">👗</div>
                            <h3>Fashion</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Home & Garden')">
                            <div class="category-icon">🏠</div>
                            <h3>Home & Garden</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Sports')">
                            <div class="category-icon">⚽</div>
                            <h3>Sports</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Books')">
                            <div class="category-icon">📚</div>
                            <h3>Books</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Beauty')">
                            <div class="category-icon">💄</div>
                            <h3>Beauty</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Food')">
                            <div class="category-icon">🍕</div>
                            <h3>Food</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Toys')">
                            <div class="category-icon">🧸</div>
                            <h3>Toys</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Automotive')">
                            <div class="category-icon">🚗</div>
                            <h3>Automotive</h3>
                        </div>
                        <div class="category-card" onclick="openCategoryPage('Health')">
                            <div class="category-icon">💊</div>
                            <h3>Health</h3>
                        </div>
                    </div>
                </div>
            </section>

            <section class="products-section">
                <div class="container">
                    <h2 class="section-title">Featured Products</h2>
                    <div id="personalizedFilters" style="text-align: center; margin-bottom: 30px; display: none;">
                        <h4 style="color: #4CAF50;">✨ Personalized Filters (Pro Feature) ✨</h4>
                        <p style="color: #777;">Based on your shopping history, here are some tailored suggestions:</p>
                        <!-- Example personalized filters - add more as needed -->
                        <div style="display: flex; justify-content: center; gap: 10px; margin-top: 15px;">
                            <span style="background: #e0f2f7; padding: 8px 15px; border-radius: 20px; font-size: 14px; cursor: pointer;">High Rated (4.5+)</span>
                            <span style="background: #e0f7e9; padding: 8px 15px; border-radius: 20px; font-size: 14px; cursor: pointer;">Top Sellers</span>
                        </div>
                    </div>
                    <div class="products-grid" id="productsGrid">
                        <!-- Products will be generated here -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Cart Page -->
        <div id="cartPage" class="page">
            <div class="container">
                <div class="cart-page">
                    <h2 class="section-title">Your Shopping Cart</h2>
                    <div id="cartItems"></div>
                    <div class="cart-summary">
                        <h3>Order Summary</h3>
                        <div style="display: flex; justify-content: space-between; margin: 10px 0; font-size: 16px;">
                            <span>Subtotal:</span>
                            <span id="subtotal">₹0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin: 10px 0; font-size: 16px;">
                            <span>Shipping:</span>
                            <span>₹99</span>
                        </div>
                        <hr style="margin: 15px 0; border-top: 1px dashed #eee;">
                        <div style="display: flex; justify-content: space-between; font-size: 22px; font-weight: bold; color: #333;">
                            <span>Total:</span>
                            <span id="total">₹99</span>
                        </div>
                        <button class="checkout-btn" onclick="showPage('checkout')">Proceed to Checkout</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Checkout Page -->
        <div id="checkoutPage" class="page">
            <div class="container">
                <div class="checkout-page">
                    <h2 class="section-title">Checkout</h2>
                    
                    <div class="checkout-form">
                        <h3>Shipping Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" id="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" id="lastName" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" id="city" required>
                            </div>
                            <div class="form-group">
                                <label for="state">State</label>
                                <input type="text" id="state" required>
                            </div>
                            <div class="form-group">
                                <label for="zipCode">ZIP Code</label>
                                <input type="text" id="zipCode" required>
                            </div>
                        </div>

                        <h3 style="margin-top: 30px; margin-bottom: 20px; color: #333;">Payment Method</h3>
                        <div class="payment-methods">
                            <div class="payment-method selected">
                                <i class="fas fa-credit-card"></i>
                                <div>Credit Card</div>
                            </div>
                            <div class="payment-method">
                                <i class="fab fa-paypal"></i>
                                <div>PayPal</div>
                            </div>
                            <div class="payment-method">
                                <i class="fas fa-university"></i>
                                <div>Bank Transfer</div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="cardNumber">Card Number</label>
                                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="expiryDate">Expiry Date</label>
                                <input type="text" id="expiryDate" placeholder="MM/YY" required>
                            </div>
                            <div class="form-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" placeholder="123" required>
                            </div>
                        </div>

                        <div class="savings-highlight">
                            💰 You're saving ₹<span id="actualSavings">0</span> compared to other platforms!
                        </div>

                        <button class="checkout-btn" onclick="placeOrder()">Place Order - <span id="finalTotal">₹0</span></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profilePage" class="page">
            <div class="container">
                <div class="profile-page-content">
                    <h2 class="section-title">My Profile</h2>
                    <div class="profile-summary">
                        <h3>Total Savings with PriceWise</h3>
                        <p>₹<span id="cumulativeSavings">0</span></p>
                        <p class="pro-status-message" id="proStatusMessage"></p>
                    </div>

                    <div class="order-history">
                        <h3>Order History</h3>
                        <div id="ordersContainer">
                            <!-- Order history will be populated here -->
                            <div class="no-orders-message" id="noOrdersMessage">No orders placed yet.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subscription Page -->
        <div id="subscriptionPage" class="page">
            <section class="subscription-section">
                <div class="container">
                    <h2 class="section-title">Unlock PriceWise Pro Features</h2>
                    <p style="margin-bottom: 40px; color: #666; font-size: 18px;">Upgrade to Pro for an even smarter shopping experience!</p>

                    <div class="subscription-plans">
                        <!-- Free Plan -->
                        <div class="plan-card">
                            <div class="plan-title">Free</div>
                            <div class="plan-price">₹0<span>/month</span></div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check-circle"></i> Basic Price Comparison</li>
                                <li><i class="fas fa-check-circle"></i> Cart Management</li>
                                <li class="dimmed"><i class="fas fa-times-circle"></i> Price Drop Alerts</li>
                                <li class="dimmed"><i class="fas fa-times-circle"></i> Personalized Filters</li>
                                <li class="dimmed"><i class="fas fa-times-circle"></i> Ad-Free Experience</li>
                            </ul>
                            <button class="activate-pro-btn" style="background: #ccc; cursor: default;" disabled>Current Plan</button>
                        </div>

                        <!-- Pro Plan -->
                        <div class="plan-card pro">
                            <div class="plan-title">PriceWise Pro</div>
                            <div class="plan-price">₹199<span>/month</span></div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check-circle"></i> Basic Price Comparison</li>
                                <li><i class="fas fa-check-circle"></i> Cart Management</li>
                                <li><i class="fas fa-check-circle"></i> Price Drop Alerts</li>
                                <li><i class="fas fa-check-circle"></i> Personalized Filters</li>
                                <li><i class="fas fa-check-circle"></i> Ad-Free Experience</li>
                            </ul>
                            <button class="activate-pro-btn" id="goProBtn" onclick="activatePro()">Go Pro Now!</button>
                            <div id="proActiveMessage" class="pro-status-message" style="display: none;">You are a Pro user!</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Category Products Page -->
        <div id="categoryProductsPage" class="page">
            <section class="category-products-section">
                <div class="container">
                    <div class="header-section">
                        <h2 id="categoryPageTitle"></h2>
                        <button class="back-button" onclick="showPage('home')">← Back to Home</button>
                    </div>
                    <div class="products-grid" id="categoryProductsGrid">
                        <!-- Products for the selected category will be generated here -->
                    </div>
                </div>
            </section>
        </div>

    </div>

    <!-- Message Box for Add to Cart -->
    <div id="messageBox" class="message-box">
        <i class="fas fa-check-circle"></i> Item added to cart successfully!
    </div>

    <!-- Order Success Modal (Razorpay-like) -->
    <div id="orderSuccessModal" class="order-success-modal">
        <div class="modal-content">
            <div class="success-icon">🎉</div>
            <div class="modal-title">Order Placed Successfully!</div>
            <div class="modal-message">
                Your order has been confirmed and will be processed shortly. 
                Thank you for choosing PriceWise!
            </div>
            <div class="modal-details">
                <div><span>Order ID:</span> <span id="modalOrderId">#PW-</span></div>
                <div><span>Total Amount:</span> <span id="modalTotalAmount">₹0</span></div>
                <div><span>Estimated Delivery:</span> <span>3-5 Business Days</span></div>
                <div><span>Ordered From:</span> <span id="modalOrderedFrom"></span></div>
                <div><span>Savings on Order:</span> <span id="modalOrderSavings">₹0</span></div>
            </div>
            <button class="modal-close-btn" onclick="closeOrderSuccessModal()">Continue Shopping</button>
        </div>
    </div>


    <script>
        // Sample product data with Indian e-commerce platforms
        const products = [
            // Electronics (10 items)
            { id: 1, name: "Wireless Headphones", category: "Electronics", price: 6639, icon: "🎧", competitors: { 
                "Amazon": { price: 7479, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 6299, delivery: 0, icon: "🟡" },
                "Myntra": { price: 6899, delivery: 99, icon: "🔴" },
                "Snapdeal": { price: 7199, delivery: 59, icon: "🔵" },
                "Nykaa": { price: 6999, delivery: 149, icon: "💗" }
            }},
            { id: 2, name: "Smart Watch", category: "Electronics", price: 16599, icon: "⌚", competitors: { 
                "Amazon": { price: 18299, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 15799, delivery: 0, icon: "🟡" },
                "Croma": { price: 17399, delivery: 199, icon: "⚫" },
                "Tata CLiQ": { price: 16999, delivery: 99, icon: "🟢" },
                "Reliance Digital": { price: 17699, delivery: 149, icon: "🔷" }
            }},
            { id: 3, name: "Bluetooth Speaker", category: "Electronics", price: 4149, icon: "🔊", competitors: { 
                "Amazon": { price: 4999, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 3799, delivery: 0, icon: "🟡" },
                "Snapdeal": { price: 4399, delivery: 59, icon: "🔵" },
                "Paytm Mall": { price: 4599, delivery: 79, icon: "💙" },
                "ShopClues": { price: 4299, delivery: 99, icon: "🟣" }
            }},
            { id: 4, name: "Gaming Keyboard", category: "Electronics", price: 7479, icon: "⌨️", competitors: { 
                "Amazon": { price: 8309, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 6639, delivery: 0, icon: "🟡" },
                "Croma": { price: 7894, delivery: 199, icon: "⚫" },
                "Reliance Digital": { price: 7649, delivery: 149, icon: "🔷" },
                "Vijay Sales": { price: 7999, delivery: 149, icon: "🛒" }
            }},
            { id: 5, name: "Wireless Mouse", category: "Electronics", price: 2074, icon: "🖱️", competitors: { 
                "Amazon": { price: 2489, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1909, delivery: 0, icon: "🟡" },
                "Snapdeal": { price: 2239, delivery: 59, icon: "🔵" },
                "Croma": { price: 2399, delivery: 199, icon: "⚫" },
                "Vijay Sales": { price: 2299, delivery: 149, icon: "🛒" }
            }},
            { id: 13, name: "Portable SSD 1TB", category: "Electronics", price: 8999, icon: "💾", competitors: {
                "Amazon": { price: 9500, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 8700, delivery: 0, icon: "🟡" },
                "Croma": { price: 9200, delivery: 99, icon: "⚫" }
            }},
            { id: 14, name: "Noise Cancelling Earbuds", category: "Electronics", price: 9999, icon: "🎧", competitors: {
                "Amazon": { price: 10500, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 9700, delivery: 0, icon: "🟡" },
                "Reliance Digital": { price: 10200, delivery: 120, icon: "🔷" }
            }},
            { id: 15, name: "Smart TV 4K 55-inch", category: "Electronics", price: 45000, icon: "📺", competitors: {
                "Amazon": { price: 48000, delivery: 200, icon: "🟠" },
                "Flipkart": { price: 44000, delivery: 0, icon: "🟡" },
                "Croma": { price: 46000, delivery: 150, icon: "⚫" }
            }},
            { id: 16, name: "Action Camera 4K", category: "Electronics", price: 22000, icon: "📸", competitors: {
                "Amazon": { price: 23500, delivery: 70, icon: "🟠" },
                "Flipkart": { price: 21500, delivery: 0, icon: "🟡" },
                "Tata CLiQ": { price: 22800, delivery: 100, icon: "🟢" }
            }},
            { id: 17, name: "Drone with HD Camera", category: "Electronics", price: 35000, icon: "🚁", competitors: {
                "Amazon": { price: 37000, delivery: 100, icon: "🟠" },
                "Flipkart": { price: 34500, delivery: 0, icon: "🟡" },
                "Snapdeal": { price: 36000, delivery: 80, icon: "🔵" }
            }},

            // Fashion (10 items)
            { id: 6, name: "Phone Case", category: "Fashion", price: 1245, icon: "📱", competitors: { 
                "Amazon": { price: 1659, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1079, delivery: 0, icon: "🟡" },
                "Myntra": { price: 1409, delivery: 99, icon: "🔴" },
                "Nykaa": { price: 1529, delivery: 149, icon: "💗" },
                "Ajio": { price: 1399, delivery: 199, icon: "🎨" }
            }},
            { id: 18, name: "Men's Casual Shirt", category: "Fashion", price: 899, icon: "👕", competitors: {
                "Myntra": { price: 950, delivery: 0, icon: "🔴" },
                "Ajio": { price: 870, delivery: 50, icon: "🎨" },
                "Flipkart": { price: 920, delivery: 70, icon: "🟡" }
            }},
            { id: 19, name: "Women's Denim Jeans", category: "Fashion", price: 1800, icon: "👖", competitors: {
                "Myntra": { price: 1950, delivery: 0, icon: "🔴" },
                "Amazon": { price: 1850, delivery: 49, icon: "🟠" },
                "Lifestyle": { price: 1700, delivery: 80, icon: "🛍️" }
            }},
            { id: 20, name: "Leather Wallet", category: "Fashion", price: 750, icon: "💼", competitors: {
                "Flipkart": { price: 780, delivery: 0, icon: "🟡" },
                "Amazon": { price: 800, delivery: 49, icon: "🟠" },
                "Snapdeal": { price: 720, delivery: 60, icon: "🔵" }
            }},
            { id: 21, name: "Sunglasses (UV Protect)", category: "Fashion", price: 1100, icon: "🕶️", competitors: {
                "Lenskart": { price: 1200, delivery: 0, icon: "👓" },
                "Myntra": { price: 1150, delivery: 70, icon: "🔴" },
                "Amazon": { price: 1050, delivery: 49, icon: "🟠" }
            }},
            { id: 22, name: "Sarees - Ethnic Wear", category: "Fashion", price: 3500, icon: "👚", competitors: {
                "Myntra": { price: 3700, delivery: 0, icon: "🔴" },
                "Ajio": { price: 3400, delivery: 100, icon: "🎨" },
                "Craftsvilla": { price: 3600, delivery: 120, icon: "🧵" }
            }},
            { id: 23, name: "Kids T-Shirt (Pack of 3)", category: "Fashion", price: 600, icon: "👶", competitors: {
                "FirstCry": { price: 650, delivery: 50, icon: "🍼" },
                "Flipkart": { price: 580, delivery: 0, icon: "🟡" },
                "Amazon": { price: 620, delivery: 49, icon: "🟠" }
            }},
            { id: 24, name: "Formal Shoes", category: "Fashion", price: 2500, icon: "👞", competitors: {
                "Myntra": { price: 2650, delivery: 0, icon: "🔴" },
                "Bata": { price: 2400, delivery: 80, icon: "👠" },
                "Amazon": { price: 2550, delivery: 49, icon: "🟠" }
            }},
            { id: 25, name: "Wrist Watch", category: "Fashion", price: 2000, icon: "⌚", competitors: {
                "Flipkart": { price: 2100, delivery: 0, icon: "🟡" },
                "Titan": { price: 1950, delivery: 70, icon: "🕰️" },
                "Myntra": { price: 2050, delivery: 99, icon: "🔴" }
            }},
            { id: 26, name: "Backpack (Travel)", category: "Fashion", price: 1500, icon: "🎒", competitors: {
                "Amazon": { price: 1600, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1450, delivery: 0, icon: "🟡" },
                "Wildcraft": { price: 1550, delivery: 100, icon: "🏕️" }
            }},

            // Home & Garden (10 items)
            { id: 4, name: "Laptop Stand", category: "Home & Garden", price: 2489, icon: "💻", competitors: { 
                "Amazon": { price: 2899, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 2319, delivery: 0, icon: "🟡" },
                "OfficeDepot": { price: 2659, delivery: 129, icon: "📋" },
                "Staples": { price: 2799, delivery: 149, icon: "📎" },
                "Pepperfry": { price: 2999, delivery: 199, icon: "🏠" }
            }},
            { id: 27, name: "Smart LED Bulb", category: "Home & Garden", price: 599, icon: "💡", competitors: {
                "Amazon": { price: 650, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 570, delivery: 0, icon: "🟡" },
                "Philips": { price: 620, delivery: 30, icon: "⚪" }
            }},
            { id: 28, name: "Coffee Maker", category: "Home & Garden", price: 2500, icon: "☕", competitors: {
                "Amazon": { price: 2700, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 2400, delivery: 0, icon: "🟡" },
                "Croma": { price: 2600, delivery: 99, icon: "⚫" }
            }},
            { id: 29, name: "Non-stick Frying Pan", category: "Home & Garden", price: 800, icon: "🍳", competitors: {
                "Amazon": { price: 850, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 780, delivery: 0, icon: "🟡" },
                "Meyer": { price: 820, delivery: 60, icon: "🔪" }
            }},
            { id: 30, name: "Queen Size Bed Sheet Set", category: "Home & Garden", price: 1200, icon: "🛏️", competitors: {
                "Amazon": { price: 1300, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1150, delivery: 0, icon: "🟡" },
                "Pepperfry": { price: 1250, delivery: 150, icon: "🏠" }
            }},
            { id: 31, name: "Indoor Plant (Money Plant)", category: "Home & Garden", price: 300, icon: "🪴", competitors: {
                "NurseryLive": { price: 350, delivery: 50, icon: "🌿" },
                "Amazon": { price: 320, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 280, delivery: 0, icon: "🟡" }
            }},
            { id: 32, name: "Vacuum Cleaner (Handheld)", category: "Home & Garden", price: 4000, icon: "🧹", competitors: {
                "Amazon": { price: 4200, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 3900, delivery: 0, icon: "🟡" },
                "Eureka Forbes": { price: 4100, delivery: 100, icon: "💦" }
            }},
            { id: 33, name: "Digital Kitchen Scale", category: "Home & Garden", price: 600, icon: "⚖️", competitors: {
                "Amazon": { price: 650, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 580, delivery: 0, icon: "🟡" }
            }},
            { id: 34, name: "Aroma Diffuser", category: "Home & Garden", price: 900, icon: "🌸", competitors: {
                "Amazon": { price: 950, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 880, delivery: 0, icon: "🟡" },
                "Nykaa": { price: 920, delivery: 80, icon: "💗" }
            }},
            { id: 35, name: "Wall Art Decor", category: "Home & Garden", price: 1500, icon: "🖼️", competitors: {
                "Amazon": { price: 1600, delivery: 49, icon: "🟠" },
                "Pepperfry": { price: 1450, delivery: 199, icon: "🏠" },
                "Myntra": { price: 1550, delivery: 99, icon: "🔴" }
            }},

            // Sports (10 items)
            { id: 9, name: "Running Shoes", category: "Sports", price: 3499, icon: "👟", competitors: {
                "Myntra": { price: 3899, delivery: 0, icon: "🔴" },
                "Decathlon": { price: 3299, delivery: 99, icon: "🟩" },
                "Adidas": { price: 4000, delivery: 49, icon: "⬛" }
            }},
            { id: 10, name: "Yoga Mat", category: "Sports", price: 999, icon: "🧘", competitors: {
                "Amazon": { price: 1100, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 950, delivery: 0, icon: "🟡" }
            }},
            { id: 36, name: "Cricket Bat (Junior)", category: "Sports", price: 1200, icon: "🏏", competitors: {
                "Amazon": { price: 1300, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1150, delivery: 0, icon: "🟡" }
            }},
            { id: 37, name: "Football (Size 5)", category: "Sports", price: 700, icon: "⚽", competitors: {
                "Decathlon": { price: 750, delivery: 50, icon: "🟩" },
                "Amazon": { price: 680, delivery: 49, icon: "🟠" }
            }},
            { id: 38, name: "Dumbbell Set (5kg x 2)", category: "Sports", price: 1800, icon: "💪", competitors: {
                "Amazon": { price: 1950, delivery: 100, icon: "🟠" },
                "Flipkart": { price: 1750, delivery: 0, icon: "🟡" },
                "Decathlon": { price: 1850, delivery: 80, icon: "🟩" }
            }},
            { id: 39, name: "Skipping Rope", category: "Sports", price: 250, icon: "➰", competitors: {
                "Amazon": { price: 280, delivery: 40, icon: "🟠" },
                "Flipkart": { price: 230, delivery: 0, icon: "🟡" }
            }},
            { id: 40, name: "Tennis Racket", category: "Sports", price: 2200, icon: "🎾", competitors: {
                "Flipkart": { price: 2300, delivery: 0, icon: "🟡" },
                "Decathlon": { price: 2100, delivery: 99, icon: "🟩" },
                "Amazon": { price: 2250, delivery: 49, icon: "🟠" }
            }},
            { id: 41, name: "Swimming Goggles", category: "Sports", price: 400, icon: "🏊", competitors: {
                "Amazon": { price: 450, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 380, delivery: 0, icon: "🟡" }
            }},
            { id: 42, name: "Protein Powder (1kg)", category: "Sports", price: 2500, icon: "🥤", competitors: {
                "MyProtein": { price: 2700, delivery: 0, icon: "💙" },
                "Amazon": { price: 2600, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 2450, delivery: 0, icon: "🟡" }
            }},
            { id: 43, name: "Badminton Shuttlecock (Pack of 6)", category: "Sports", price: 350, icon: "🏸", competitors: {
                "Amazon": { price: 380, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 330, delivery: 0, icon: "🟡" }
            }},

            // Books (10 items)
            { id: 11, name: "Cookbook", category: "Books", price: 750, icon: "📖", competitors: {
                "Amazon": { price: 800, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 720, delivery: 0, icon: "🟡" },
                "Crossword": { price: 780, delivery: 60, icon: "🟫" }
            }},
            { id: 44, name: "Fiction Novel (Bestseller)", category: "Books", price: 400, icon: "📚", competitors: {
                "Amazon": { price: 450, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 380, delivery: 0, icon: "🟡" },
                "Sapna Book House": { price: 420, delivery: 50, icon: "📚" }
            }},
            { id: 45, name: "Self-Help Book", category: "Books", price: 300, icon: "💡", competitors: {
                "Amazon": { price: 330, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 280, delivery: 0, icon: "🟡" }
            }},
            { id: 46, name: "Children's Story Book", category: "Books", price: 200, icon: "👧", competitors: {
                "Amazon": { price: 220, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 190, delivery: 0, icon: "🟡" }
            }},
            { id: 47, name: "Academic Textbook", category: "Books", price: 1500, icon: "🎓", competitors: {
                "Amazon": { price: 1600, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1450, delivery: 0, icon: "🟡" },
                "Higher Ed Books": { price: 1550, delivery: 100, icon: "🏫" }
            }},
            { id: 48, name: "Biography", category: "Books", price: 600, icon: "📜", competitors: {
                "Amazon": { price: 650, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 580, delivery: 0, icon: "🟡" }
            }},
            { id: 49, name: "Graphic Novel", category: "Books", price: 800, icon: "🦸", competitors: {
                "Amazon": { price: 850, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 780, delivery: 0, icon: "🟡" }
            }},
            { id: 50, name: "Travel Guidebook", category: "Books", price: 450, icon: "✈️", competitors: {
                "Amazon": { price: 480, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 420, delivery: 0, icon: "🟡" }
            }},
            { id: 51, name: "Poetry Collection", category: "Books", price: 250, icon: "✍️", competitors: {
                "Amazon": { price: 270, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 230, delivery: 0, icon: "🟡" }
            }},
            { id: 52, name: "Art History Book", category: "Books", price: 1200, icon: "🎨", competitors: {
                "Amazon": { price: 1300, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1150, delivery: 0, icon: "🟡" }
            }},

            // Beauty (10 items)
            { id: 12, name: "Face Serum", category: "Beauty", price: 1500, icon: "✨", competitors: {
                "Nykaa": { price: 1450, delivery: 0, icon: "💗" },
                "Myntra": { price: 1550, delivery: 99, icon: "🔴" }
            }},
            { id: 53, name: "Sunscreen (SPF 50)", category: "Beauty", price: 700, icon: "☀️", competitors: {
                "Nykaa": { price: 680, delivery: 0, icon: "💗" },
                "Amazon": { price: 720, delivery: 49, icon: "🟠" }
            }},
            { id: 54, name: "Moisturizer (Hydrating)", category: "Beauty", price: 900, icon: "💧", competitors: {
                "Nykaa": { price: 880, delivery: 0, icon: "💗" },
                "Myntra": { price: 920, delivery: 70, icon: "🔴" }
            }},
            { id: 55, name: "Shampoo & Conditioner Set", category: "Beauty", price: 600, icon: "🧴", competitors: {
                "Nykaa": { price: 580, delivery: 0, icon: "💗" },
                "Amazon": { price: 620, delivery: 49, icon: "🟠" }
            }},
            { id: 56, name: "Lipstick (Matte Finish)", category: "Beauty", price: 450, icon: "💄", competitors: {
                "Nykaa": { price: 430, delivery: 0, icon: "💗" },
                "Myntra": { price: 470, delivery: 60, icon: "🔴" }
            }},
            { id: 57, name: "Perfume (Eau de Parfum)", category: "Beauty", price: 2500, icon: "💨", competitors: {
                "Nykaa": { price: 2400, delivery: 0, icon: "💗" },
                "Sephora": { price: 2600, delivery: 100, icon: "🖤" },
                "Myntra": { price: 2550, delivery: 99, icon: "🔴" }
            }},
            { id: 58, name: "Hair Dryer", category: "Beauty", price: 1800, icon: "🌬️", competitors: {
                "Amazon": { price: 1900, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1750, delivery: 0, icon: "🟡" },
                "Croma": { price: 1850, delivery: 80, icon: "⚫" }
            }},
            { id: 59, name: "Nail Polish Set", category: "Beauty", price: 300, icon: "💅", competitors: {
                "Nykaa": { price: 290, delivery: 0, icon: "💗" },
                "Amazon": { price: 310, delivery: 49, icon: "🟠" }
            }},
            { id: 60, name: "Facial Cleanser", category: "Beauty", price: 800, icon: "🧼", competitors: {
                "Nykaa": { price: 780, delivery: 0, icon: "💗" },
                "Amazon": { price: 820, delivery: 49, icon: "🟠" }
            }},
            { id: 61, name: "Body Lotion", category: "Beauty", price: 500, icon: "🧴", competitors: {
                "Nykaa": { price: 480, delivery: 0, icon: "💗" },
                "Myntra": { price: 520, delivery: 70, icon: "🔴" }
            }},

            // Food (10 items)
            { id: 62, name: "Organic Basmati Rice (5kg)", category: "Food", price: 600, icon: "🍚", competitors: {
                "BigBasket": { price: 620, delivery: 30, icon: "🟩" },
                "Amazon": { price: 650, delivery: 49, icon: "🟠" },
                "Grofers": { price: 580, delivery: 20, icon: "🍊" }
            }},
            { id: 63, name: "Extra Virgin Olive Oil (1L)", category: "Food", price: 850, icon: "🍾", competitors: {
                "BigBasket": { price: 880, delivery: 30, icon: "🟩" },
                "Amazon": { price: 900, delivery: 49, icon: "🟠" },
                "Nature's Basket": { price: 820, delivery: 50, icon: "🧺" }
            }},
            { id: 64, name: "Assorted Tea Bags (100 pcs)", category: "Food", price: 300, icon: "☕", competitors: {
                "BigBasket": { price: 320, delivery: 20, icon: "🟩" },
                "Amazon": { price: 330, delivery: 49, icon: "🟠" }
            }},
            { id: 65, name: "Dry Fruits Mix (500g)", category: "Food", price: 700, icon: "🌰", competitors: {
                "BigBasket": { price: 720, delivery: 30, icon: "🟩" },
                "Amazon": { price: 750, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 680, delivery: 0, icon: "🟡" }
            }},
            { id: 66, name: "Instant Coffee (200g)", category: "Food", price: 350, icon: "☕", competitors: {
                "BigBasket": { price: 360, delivery: 20, icon: "🟩" },
                "Amazon": { price: 380, delivery: 49, icon: "🟠" }
            }},
            { id: 67, name: "Organic Honey (500g)", category: "Food", price: 450, icon: "🍯", competitors: {
                "BigBasket": { price: 470, delivery: 30, icon: "🟩" },
                "Amazon": { price: 480, delivery: 49, icon: "🟠" }
            }},
            { id: 68, name: "Whole Wheat Bread", category: "Food", price: 60, icon: "🍞", competitors: {
                "Grofers": { price: 65, delivery: 10, icon: "🍊" },
                "Local Store": { price: 55, delivery: 0, icon: "🏬" }
            }},
            { id: 69, name: "Fresh Apples (1kg)", category: "Food", price: 200, icon: "🍎", competitors: {
                "BigBasket": { price: 210, delivery: 30, icon: "🟩" },
                "Grofers": { price: 190, delivery: 20, icon: "🍊" }
            }},
            { id: 70, name: "Dairy Milk Chocolate (100g)", category: "Food", price: 100, icon: "🍫", competitors: {
                "Amazon": { price: 110, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 95, delivery: 0, icon: "🟡" }
            }},
            { id: 71, name: "Pasta (Durum Wheat - 500g)", category: "Food", price: 150, icon: "🍝", competitors: {
                "BigBasket": { price: 160, delivery: 25, icon: "🟩" },
                "Amazon": { price: 170, delivery: 49, icon: "🟠" }
            }},
            
            // Toys (10 items)
            { id: 72, name: "Building Blocks Set (100 pcs)", category: "Toys", price: 900, icon: "🧱", competitors: {
                "Amazon": { price: 950, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 880, delivery: 0, icon: "🟡" },
                "Hamleys": { price: 980, delivery: 70, icon: "🧸" }
            }},
            { id: 73, name: "Remote Control Car", category: "Toys", price: 1500, icon: "🏎️", competitors: {
                "Amazon": { price: 1600, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1450, delivery: 0, icon: "🟡" }
            }},
            { id: 74, name: "Plush Teddy Bear (Large)", category: "Toys", price: 700, icon: "🐻", competitors: {
                "Amazon": { price: 750, delivery: 49, icon: "🟠" },
                "FirstCry": { price: 680, delivery: 50, icon: "🍼" }
            }},
            { id: 75, name: "Board Game (Strategy)", category: "Toys", price: 1200, icon: "🎲", competitors: {
                "Amazon": { price: 1300, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1150, delivery: 0, icon: "🟡" }
            }},
            { id: 76, name: "Art & Craft Kit", category: "Toys", price: 500, icon: "🎨", competitors: {
                "Amazon": { price: 550, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 480, delivery: 0, icon: "🟡" }
            }},
            { id: 77, name: "Doll Set (Fashion Dolls)", category: "Toys", price: 800, icon: "👧", competitors: {
                "Amazon": { price: 850, delivery: 49, icon: "🟠" },
                "FirstCry": { price: 780, delivery: 60, icon: "🍼" }
            }},
            { id: 78, name: "Educational Tablet (Kids)", category: "Toys", price: 2500, icon: "📱", competitors: {
                "Amazon": { price: 2650, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 2400, delivery: 0, icon: "🟡" }
            }},
            { id: 79, name: "Water Gun (Large)", category: "Toys", price: 300, icon: "�", competitors: {
                "Amazon": { price: 320, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 280, delivery: 0, icon: "🟡" }
            }},
            { id: 80, name: "Toy Train Set", category: "Toys", price: 1100, icon: "🚂", competitors: {
                "Amazon": { price: 1200, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1050, delivery: 0, icon: "🟡" }
            }},
            { id: 81, name: "Puzzle (1000 pieces)", category: "Toys", price: 600, icon: "🧩", competitors: {
                "Amazon": { price: 650, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 580, delivery: 0, icon: "🟡" }
            }},

            // Automotive (10 items)
            { id: 82, name: "Car Cleaning Kit", category: "Automotive", price: 999, icon: "🚗", competitors: {
                "Amazon": { price: 1050, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 950, delivery: 0, icon: "🟡" },
                "GoMechanic": { price: 1020, delivery: 80, icon: "🔧" }
            }},
            { id: 83, name: "Car Air Purifier", category: "Automotive", price: 1800, icon: "🌬️", competitors: {
                "Amazon": { price: 1900, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1750, delivery: 0, icon: "🟡" }
            }},
            { id: 84, name: "Puncture Repair Kit", category: "Automotive", price: 400, icon: "⚙️", competitors: {
                "Amazon": { price: 430, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 380, delivery: 0, icon: "🟡" }
            }},
            { id: 85, name: "Dashboard Polish (500ml)", category: "Automotive", price: 250, icon: "✨", competitors: {
                "Amazon": { price: 270, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 230, delivery: 0, icon: "🟡" }
            }},
            { id: 86, name: "Car Seat Cover Set", category: "Automotive", price: 2500, icon: "🛋️", competitors: {
                "Amazon": { price: 2650, delivery: 100, icon: "🟠" },
                "Flipkart": { price: 2400, delivery: 0, icon: "🟡" },
                "AutoFurnish": { price: 2550, delivery: 150, icon: "💺" }
            }},
            { id: 87, name: "Jump Starter Cable", category: "Automotive", price: 1200, icon: "⚡", competitors: {
                "Amazon": { price: 1300, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1150, delivery: 0, icon: "🟡" }
            }},
            { id: 88, name: "Mobile Holder for Car", category: "Automotive", price: 300, icon: "📱", competitors: {
                "Amazon": { price: 320, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 280, delivery: 0, icon: "🟡" }
            }},
            { id: 89, name: "Tyre Inflator (Portable)", category: "Automotive", price: 1700, icon: "💨", competitors: {
                "Amazon": { price: 1800, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1650, delivery: 0, icon: "🟡" }
            }},
            { id: 90, name: "Car Floor Mats (Set)", category: "Automotive", price: 800, icon: "👣", competitors: {
                "Amazon": { price: 850, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 780, delivery: 0, icon: "🟡" }
            }},
            { id: 91, name: "Car Dash Cam", category: "Automotive", price: 3000, icon: "📹", competitors: {
                "Amazon": { price: 3200, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 2900, delivery: 0, icon: "🟡" },
                "GoMechanic": { price: 3100, delivery: 100, icon: "🔧" }
            }},

            // Health (10 items)
            { id: 92, name: "Digital Thermometer", category: "Health", price: 250, icon: "🌡️", competitors: {
                "Apollo Pharmacy": { price: 270, delivery: 30, icon: "⚕️" },
                "Amazon": { price: 260, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 240, delivery: 0, icon: "🟡" }
            }},
            { id: 93, name: "Blood Pressure Monitor", category: "Health", price: 1800, icon: "🩺", competitors: {
                "Apollo Pharmacy": { price: 1900, delivery: 50, icon: "⚕️" },
                "Amazon": { price: 1850, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 1750, delivery: 0, icon: "🟡" }
            }},
            { id: 94, name: "First Aid Kit (Basic)", category: "Health", price: 500, icon: "🩹", competitors: {
                "Amazon": { price: 550, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 480, delivery: 0, icon: "🟡" }
            }},
            { id: 95, name: "Hand Sanitizer (500ml)", category: "Health", price: 150, icon: "🧴", competitors: {
                "Apollo Pharmacy": { price: 160, delivery: 20, icon: "⚕️" },
                "Amazon": { price: 170, delivery: 49, icon: "🟠" }
            }},
            { id: 96, name: "Pulse Oximeter", category: "Health", price: 1000, icon: " пульс", competitors: {
                "Amazon": { price: 1050, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 980, delivery: 0, icon: "🟡" }
            }},
            { id: 97, name: "Multivitamin Tablets (60 pcs)", category: "Health", price: 300, icon: "💊", competitors: {
                "Apollo Pharmacy": { price: 320, delivery: 30, icon: "⚕️" },
                "Amazon": { price: 330, delivery: 49, icon: "🟠" }
            }},
            { id: 98, name: "Hot Water Bag", category: "Health", price: 200, icon: "🌡️", competitors: {
                "Amazon": { price: 220, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 190, delivery: 0, icon: "🟡" }
            }},
            { id: 99, name: "Weight Scale (Digital)", category: "Health", price: 800, icon: "⚖️", competitors: {
                "Amazon": { price: 850, delivery: 49, icon: "🟠" },
                "Flipkart": { price: 780, delivery: 0, icon: "🟡" }
            }},
            { id: 100, name: "Protein Bars (Pack of 6)", category: "Health", price: 450, icon: "🍫", competitors: {
                "Amazon": { price: 480, delivery: 49, icon: "🟠" },
                "MyProtein": { price: 420, delivery: 0, icon: "💙" }
            }},
            { id: 101, name: "Yoga Pants (Women's)", category: "Health", price: 700, icon: "🧘‍♀️", competitors: {
                "Myntra": { price: 750, delivery: 0, icon: "🔴" },
                "Amazon": { price: 720, delivery: 49, icon: "🟠" }
            }}
        ];

        let cart = [];
        let currentPage = 'home';
        let selectedSellers = {}; 
        let orderHistory = []; // Stores past orders
        let cumulativeSavings = 0; // Stores total savings across all orders
        let isProUser = false; // New state for Pro user status

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            generateProducts(products); // Generate all products initially
            updateCartCount();
            updateCartDisplay();
            
            // Login form handler
            const loginForm = document.getElementById('loginForm');
            const loginBtn = document.querySelector('.login-btn');
            
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
            
            if (loginBtn) {
                loginBtn.addEventListener('click', handleLogin);
            }

            // Navigation handler
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    showPage(page);
                });
            });

            // Payment method selection
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', function() {
                    document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            updateProStatusDisplay(); // Update pro status on load
        });

        // Handles login, hides login page and shows main application
        function handleLogin(e) {
            e.preventDefault();
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');

            if (!emailInput.value.trim() || !passwordInput.value.trim()) {
                showCartMessage("Please enter both email and password.", true);
                return;
            }

            const loginPage = document.getElementById('loginPage');
            const mainApp = document.getElementById('mainApp');
            
            if (loginPage && mainApp) {
                loginPage.style.display = 'none';
                mainApp.style.display = 'block';
                mainApp.classList.add('show');
                showPage('home'); // Ensure home page is visible
            }
        }

        // Generates product cards on the specified grid
        function generateProducts(productsToDisplay, targetGridId = 'productsGrid') {
            const grid = document.getElementById(targetGridId);
            grid.innerHTML = ''; // Clear existing products
            if (productsToDisplay.length === 0) {
                grid.innerHTML = '<div style="text-align: center; width: 100%; padding: 50px; color: #666; font-size: 18px;">No products found for your search.</div>';
                return;
            }

            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // Add price alert button conditionally based on pro status
                const priceAlertButtonHtml = isProUser ?
                    `<button class="price-alert-btn" onclick="setPriceAlert(${product.id})">Set Price Alert</button>` :
                    `<button class="price-alert-btn disabled" onclick="showCartMessage('Price Alert is a Pro feature! Upgrade to Pro to use this.', true)">Pro Feature</button>`;

                // Add share button
                const shareButtonHtml = `<button class="share-btn" onclick="shareProduct(${product.id})">Share Product</button>`;


                productCard.innerHTML = `
                    <div class="product-image">${product.icon}</div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">₹${product.price}</div>
                        ${priceAlertButtonHtml}
                        ${shareButtonHtml}
                        <button class="add-to-cart-btn" onclick="addToCart(${product.id}, this)">Add to Cart</button>
                    </div>
                `;
                grid.appendChild(productCard);
            });
             // Show personalized filters only if pro user and on home page
            document.getElementById('personalizedFilters').style.display = (isProUser && targetGridId === 'productsGrid') ? 'block' : 'none';
        }

        // Simulates setting a price alert (Pro Feature)
        function setPriceAlert(productId) {
            if (isProUser) {
                const product = products.find(p => p.id === productId);
                showCartMessage(`Price alert set for ${product.name}! We'll notify you of drops.`);
            } else {
                showCartMessage('Price Alert is a Pro feature! Upgrade to Pro to use this.', true);
            }
        }

        // Shares product URL
        function shareProduct(productId) {
            const product = products.find(p => p.id === productId);
            const productUrl = `https://pricewise.com/product/${product.id}/${encodeURIComponent(product.name.replace(/\s/g, '-'))}`; // Mock URL

            if (navigator.share) {
                navigator.share({
                    title: `Check out ${product.name} on PriceWise!`,
                    text: `I found a great deal on ${product.name}. Check it out on PriceWise!`,
                    url: productUrl,
                }).then(() => {
                    showCartMessage('Product shared successfully!');
                }).catch((error) => {
                    // Fallback for when share dialog is cancelled or fails
                    console.error('Share failed:', error);
                    showCartMessage('Could not share. URL copied to clipboard!', false);
                    copyToClipboard(productUrl);
                });
            } else {
                // Fallback for browsers that don't support navigator.share
                copyToClipboard(productUrl);
                showCartMessage('Product URL copied to clipboard!', false);
            }
        }

        function copyToClipboard(text) {
            if (window.clipboardData && window.clipboardData.setData) {
                // IE specific code path to prevent textarea being shown while dialog is visible.
                return window.clipboardData.setData("Text", text);

            } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
                var textarea = document.createElement("textarea");
                textarea.textContent = text;
                textarea.style.position = "fixed";  // Prevent scrolling to bottom of page in MS Edge.
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    return document.execCommand("copy");  // Security exception may be thrown by some browsers.
                } catch (ex) {
                    console.warn("Copy to clipboard failed.", ex);
                    return false;
                } finally {
                    document.body.removeChild(textarea);
                }
            }
        }


        // Adds an item to the cart with animation and message
        function addToCart(productId, buttonElement) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                // If adding a new item, set its initially selected seller to the cheapest one
                const cheapestCompetitorName = Object.keys(product.competitors).reduce((a, b) => 
                    product.competitors[a].price < product.competitors[b].price ? a : b
                );
                cart.push({ ...product, quantity: 1 });
                selectedSellers[productId] = cheapestCompetitorName;
            }
            
            updateCartCount();
            updateCartDisplay();
            showCartMessage(`${product.name} added to cart!`);

            // Add animation class
            const productCard = buttonElement.closest('.product-card');
            if (productCard) {
                productCard.classList.add('adding-to-cart');
                setTimeout(() => {
                    productCard.classList.remove('adding-to-cart');
                }, 600); // Duration of the animation
            }
        }

        // Shows a temporary message box
        let messageBoxTimeout;
        function showCartMessage(message, isError = false) {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = message;
            messageBox.style.backgroundColor = isError ? '#f44336' : '#4CAF50'; // Red for error, green for success
            messageBox.classList.add('show');

            if (messageBoxTimeout) {
                clearTimeout(messageBoxTimeout);
            }
            messageBoxTimeout = setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000); // Message disappears after 3 seconds
        }


        // Removes an item from the cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            delete selectedSellers[productId]; // Also remove from selected sellers
            updateCartCount();
            updateCartDisplay();
        }

        // Updates the quantity of an item in the cart
        function updateQuantity(productId, quantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = Math.max(1, quantity);
                updateCartCount();
                updateCartDisplay();
                updateCheckoutTotal(); // Update total if quantity changes in cart page
            }
        }

        // Updates the cart count displayed in the header icon
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        // Updates the display of items in the cart page
        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cartItems');
            cartItemsContainer.innerHTML = '';

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<div style="text-align: center; padding: 40px; color: #666; font-size: 18px;">Your cart is empty. Start shopping!</div>';
                updateCartSummary();
                return;
            }

            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                
                // Get the currently selected seller for this item
                const currentSellerName = selectedSellers[item.id] || Object.keys(item.competitors)[0]; // Default to first if not set
                const currentSellerData = item.competitors[currentSellerName];

                cartItem.innerHTML = `
                    <div class="cart-item-image">${item.icon}</div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">₹${currentSellerData.price}</div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, ${item.quantity - 1})">-</button>
                            <input type="number" class="quantity-input" value="${item.quantity}" 
                                   onchange="updateQuantity(${item.id}, parseInt(this.value))">
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, ${item.quantity + 1})">+</button>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})">Remove</button>
                        </div>
                        <div class="price-comparison">
                            <h4>💰 Price Comparison (<span style="color: #ff6b35;">Selected: ${currentSellerName}</span>)</h4>
                            <div class="competitor-prices">
                                ${Object.entries(item.competitors).map(([store, data]) => `
                                    <div class="competitor-price ${selectedSellers[item.id] === store ? 'cheapest' : ''}" 
                                         onclick="selectSellerForItem(${item.id}, '${store}', event)">
                                        ${data.icon} ${store}: ₹${data.price} ${data.delivery === 0 ? '(Free)' : `(+₹${data.delivery})`}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);
            });

            updateCartSummary();
        }

        // Updates the order summary in the cart page
        function updateCartSummary() {
            const subtotal = cart.reduce((total, item) => {
                const selectedSellerPrice = item.competitors[selectedSellers[item.id]] ? item.competitors[selectedSellers[item.id]].price : item.price;
                return total + (selectedSellerPrice * item.quantity);
            }, 0);

            // Calculate total delivery based on selected sellers. Max delivery among all selected items.
            let totalDelivery = 0;
            if (cart.length > 0) {
                 totalDelivery = Math.max(...cart.map(item => {
                    const sellerName = selectedSellers[item.id];
                    return item.competitors[sellerName] ? item.competitors[sellerName].delivery : 0;
                }));
            }
           
            const total = subtotal + totalDelivery; 

            document.getElementById('subtotal').textContent = `₹${subtotal.toFixed(0)}`;
            document.getElementById('total').textContent = `₹${total.toFixed(0)}`;
            updateCheckoutTotal(); // Also update checkout page total
            calculateSavings(); // Calculate and display savings
        }

        // Selects a seller for a specific item in the cart
        function selectSellerForItem(itemId, sellerName, event) {
            selectedSellers[itemId] = sellerName;
            updateCartDisplay(); // Re-render cart to show new selection and update totals
        }

        // Shows the specified page and updates navigation
        function showPage(pageName) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === pageName) {
                    item.classList.add('active');
                }
            });

            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageName + 'Page').classList.add('active');

            currentPage = pageName;

            if (pageName === 'cart') {
                updateCartDisplay();
            }
            if (pageName === 'checkout') {
                updateCheckoutTotal();
            }
            if (pageName === 'profile') {
                renderProfilePage();
            }
            if (pageName === 'home') {
                generateProducts(products); // Re-render products to apply Pro feature changes
            }
            if (pageName === 'categoryProducts') {
                // This page is rendered by openCategoryPage, not directly by showPage
                // No action needed here, just ensures the page is activated
            }
        }

        // Updates the final total on the checkout page
        function updateCheckoutTotal() {
            const subtotal = cart.reduce((total, item) => {
                const selectedSellerPrice = item.competitors[selectedSellers[item.id]] ? item.competitors[selectedSellers[item.id]].price : item.price;
                return total + (selectedSellerPrice * item.quantity);
            }, 0);

            let totalDelivery = 0;
            if (cart.length > 0) {
                 totalDelivery = Math.max(...cart.map(item => {
                    const sellerName = selectedSellers[item.id];
                    return item.competitors[sellerName] ? item.competitors[sellerName].delivery : 0;
                }));
            }
            
            const finalTotal = subtotal + totalDelivery; 
            document.getElementById('finalTotal').textContent = `₹${finalTotal.toFixed(0)}`;
            calculateSavings(); // Re-calculate savings when total updates
        }

        // Calculates and displays potential savings
        function calculateSavings() {
            let totalActualPrice = 0; // Price if bought from the highest competitor for each item
            let totalOurPrice = 0; // Price if bought from our selected sellers

            cart.forEach(item => {
                const prices = Object.values(item.competitors).map(c => c.price);
                const highestPrice = Math.max(...prices);
                totalActualPrice += (highestPrice * item.quantity);

                const selectedSellerPrice = item.competitors[selectedSellers[item.id]] ? item.competitors[selectedSellers[item.id]].price : item.price;
                totalOurPrice += (selectedSellerPrice * item.quantity);
            });

            const savings = totalActualPrice - totalOurPrice;
            document.getElementById('actualSavings').textContent = savings.toFixed(0);
            return savings; // Return the calculated savings for order history
        }

        // Places the order and shows success modal
        function placeOrder() {
            if (cart.length === 0) {
                showCartMessage('Your cart is empty. Add items before placing an order!', true);
                return;
            }
            
            // Check if all items have a selected seller (should be by default now)
            for (const item of cart) {
                if (!selectedSellers[item.id]) {
                    showCartMessage('Please ensure a seller is selected for all items in your cart!', true);
                    return;
                }
            }

            // Validate shipping and payment information
            const requiredFields = [
                document.getElementById('firstName'),
                document.getElementById('lastName'),
                document.getElementById('address'),
                document.getElementById('city'),
                document.getElementById('state'),
                document.getElementById('zipCode'),
                document.getElementById('cardNumber'),
                document.getElementById('expiryDate'),
                document.getElementById('cvv')
            ];

            for (const field of requiredFields) {
                if (!field.value.trim()) {
                    showCartMessage(`Please fill in your ${field.previousElementSibling.textContent.toLowerCase()} before placing the order.`, true);
                    field.focus();
                    return;
                }
            }


            const uniqueSellers = [...new Set(Object.values(selectedSellers))];
            const finalTotalValue = document.getElementById('finalTotal').textContent;
            
            let currentOrderSavings = 0;
            cart.forEach(item => {
                const prices = Object.values(item.competitors).map(c => c.price);
                const highestPrice = Math.max(...prices);
                const selectedSellerPrice = item.competitors[selectedSellers[item.id]].price;
                currentOrderSavings += (highestPrice - selectedSellerPrice) * item.quantity;
            });

            cumulativeSavings += currentOrderSavings; // Add current order's savings to cumulative

            const orderId = '#PW-' + Math.floor(Math.random() * 1000000);
            const orderDate = new Date().toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' });

            const orderDetails = {
                id: orderId,
                date: orderDate,
                total: finalTotalValue,
                orderedFrom: uniqueSellers.join(', '),
                savings: currentOrderSavings, // Store actual savings for this order
                items: cart.map(item => ({
                    name: item.name,
                    quantity: item.quantity,
                    seller: selectedSellers[item.id],
                    price: item.competitors[selectedSellers[item.id]].price,
                    originalPrice: Math.max(...Object.values(item.competitors).map(c => c.price)) // Store max price for this item
                }))
            };
            orderHistory.push(orderDetails);

            // Populate modal details
            document.getElementById('modalOrderId').textContent = orderId;
            document.getElementById('modalTotalAmount').textContent = finalTotalValue;
            document.getElementById('modalOrderedFrom').textContent = uniqueSellers.join(', ');
            document.getElementById('modalOrderSavings').textContent = `₹${currentOrderSavings.toFixed(0)}`;


            document.getElementById('orderSuccessModal').classList.add('show');
            cart = []; // Clear cart after successful order
            selectedSellers = {};
            updateCartCount();
            updateCartDisplay();
            renderProfilePage(); // Update profile page immediately
        }

        // Closes the order success modal and redirects to home
        function closeOrderSuccessModal() {
            document.getElementById('orderSuccessModal').classList.remove('show');
            showPage('home'); // Redirect to home after closing modal
        }

        // Search functionality for product names
        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm)
            );
            generateProducts(filteredProducts); // Re-generate products based on search term
            showPage('home'); // Ensure we are on the home page to see results
        }

        // Opens a new page for a specific category
        function openCategoryPage(categoryName) {
            const filteredProducts = products.filter(product => 
                product.category === categoryName
            );
            document.getElementById('categoryPageTitle').textContent = `${categoryName} Products`;
            generateProducts(filteredProducts, 'categoryProductsGrid'); // Generate products in the category grid
            showPage('categoryProducts'); // Show the category products page
        }

        // Renders the profile page with order history and total savings
        function renderProfilePage() {
            document.getElementById('cumulativeSavings').textContent = cumulativeSavings.toFixed(0);
            const ordersContainer = document.getElementById('ordersContainer');
            ordersContainer.innerHTML = ''; // Clear previous orders

            if (orderHistory.length === 0) {
                ordersContainer.innerHTML = '<div class="no-orders-message" id="noOrdersMessage">No orders placed yet.</div>';
                document.getElementById('noOrdersMessage').style.display = 'block'; // Ensure message is visible
                return;
            } else {
                document.getElementById('noOrdersMessage').style.display = 'none'; // Hide message if orders exist
            }

            orderHistory.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-item-card';
                orderCard.innerHTML = `
                    <div class="order-header">
                        <span>Order ID: ${order.id}</span>
                        <span>Date: ${order.date}</span>
                    </div>
                    <ul class="order-details-list">
                        <li><strong>Total:</strong> ${order.total}</li>
                        <li><strong>Savings:</strong> ₹${order.savings.toFixed(0)}</li>
                        <li><strong>Ordered From:</strong> ${order.orderedFrom}</li>
                        <li><strong>Items:</strong></li>
                        <ul>
                            ${order.items.map(item => `
                                <li>- ${item.name} (x${item.quantity}) from ${item.seller} @ ₹${item.price} each (Max Original: ₹${item.originalPrice}, Saved: ₹${(item.originalPrice - item.price).toFixed(0)})</li>
                            `).join('')}
                        </ul>
                    </ul>
                `;
                ordersContainer.appendChild(orderCard);
            });
            updateProStatusDisplay(); // Update pro status display in profile too
        }

        // Activates Pro subscription
        function activatePro() {
            isProUser = true;
            showCartMessage('🎉 You are now a PriceWise Pro user!', false);
            updateProStatusDisplay(); // Update UI everywhere
            showPage('home'); // Go back to home to see changes
        }

        // Updates Pro status message and button visibility
        function updateProStatusDisplay() {
            const goProBtn = document.getElementById('goProBtn');
            const proActiveMessage = document.getElementById('proActiveMessage');
            const proStatusProfile = document.getElementById('proStatusMessage');

            if (isProUser) {
                if (goProBtn) goProBtn.style.display = 'none';
                if (proActiveMessage) proActiveMessage.style.display = 'block';
                if (proStatusProfile) proStatusProfile.textContent = 'Pro User: Active ✅';
                if (proStatusProfile) proStatusProfile.style.color = '#4CAF50';
            } else {
                if (goProBtn) {
                    goProBtn.style.display = 'block';
                    goProBtn.textContent = 'Go Pro Now!';
                    goProBtn.disabled = false;
                }
                if (proActiveMessage) proActiveMessage.style.display = 'none';
                if (proStatusProfile) proStatusProfile.textContent = 'Pro User: Inactive ❌';
                if (proStatusProfile) proStatusProfile.style.color = '#f44336';
            }
            // Re-render products to show/hide pro features on product cards
            if (currentPage === 'home' || currentPage === 'categoryProducts') {
                // If on home or category page, regenerate with correct pro features
                const productsToDisplay = currentPage === 'home' ? products : products.filter(p => p.category === document.getElementById('categoryPageTitle').textContent.replace(' Products', ''));
                generateProducts(productsToDisplay, currentPage === 'home' ? 'productsGrid' : 'categoryProductsGrid');
            }
        }
    </script>
</body>
</html>
